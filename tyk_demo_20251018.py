# -*- coding: utf-8 -*-
"""Copia de TyK Demo - 20251018

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/10K5Vys8kDii-PTRDxpIU4PRtGtP3QOTa

![Logo.png](data:image/png;base64,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)

---

# **TyK Demo - Octubre 2025**

# **Conectar datos e iniciar entorno**

Como primer paso, **conectaremos nuestros datos**.

Luego, iniciaremos el entorno y sus datos **estarán listos para navegar**.

## **Conectando con sus datos**
"""

# @title Estableciendo conexión...
from google.colab import drive
drive.mount('/content/drive/')

import os
print(os.listdir("/content/drive/MyDrive/Consultorías/TyK/Demos/Notebook"))

"""## **Iniciar el entorno**"""

# @title Inicializando...
!pip install pyvis
import networkx as nx
import plotly.graph_objs as go
from pyvis.network import Network
import os, re, json, csv, uuid, glob
from pathlib import Path
import tempfile
from IPython.display import display, HTML, clear_output

import matplotlib.pyplot as plt
import plotly.io as pio

from typing import Any, Dict, List, Optional, Tuple, Iterable,Union, Sequence, Set
import heapq
from collections import defaultdict
from matplotlib import cm, colormaps, colors as mcolors
import webbrowser
!pip install pycountry
# !pip install keplergl geopandas pycountry #TARDA MUCHO EN INSTALAR PERO MUESTRA EL MAPA

"""
### **¿Qué debo hacer?**
- Seleccione el valor de **`DATASET`**, que indica la **carpeta donde están guardados sus archivos**.  

"""

# @title Seleccione sus datos {"run":"auto"}
import json, re, io
import pandas as pd


from tyk import TyK

### outside class, set dataset
DATASET = "UNRN" # @param ["UNRN","HV","Ecuador","Niembro3"]
PATH = f"/content/drive/MyDrive/Consultorías/TyK/Demos/Notebook/{DATASET}/"


tyk = TyK(
    path_base=PATH,
)



"""**Cargar datos de clusters**"""

# @title Exploración inicial de los datos {"run":"auto"}
# contar cuántos items hay por stuff en cada TOP
for cid, name in tyk.list_clusters(top=True, show=None):
    c = tyk.get_cluster(cid)
    stuff = (c.get("stuff") or {})
    counts = {k: len(v or []) for k, v in stuff.items()}
    #print(f"{cid} — {name}:", counts)

import pandas as pd

stuff_types = ["MCP","MRP","MCAU","K","TK","S","S2","J","C","I","R","RJ","A","Y"]
rows = []

for cid, name in tyk.list_clusters(top=True, show=None):   # top=False para SUB

    c = tyk.get_cluster(cid)
    s = (c.get("stuff") or {})
    row = {"id": cid, "name": name, "size": int(c.get("size", 0))}
    for t in stuff_types:
        row[t] = len(s.get(t, []) or [])
    rows.append(row)

df = pd.DataFrame(rows).set_index(["id","name"]).sort_values("MCP", ascending=False)
df

# @title Geolocalización {"run":"auto"}
tyk.plot_map()

# @title **Clustering BC** - visualice todos los clusters y subclusters {"run":"auto"}
level = "SUB"            # @param ["TOP","SUB"]
if level == "TOP":
  tyk.list_clusters()
else:
  tyk.list_clusters(top=False)

# @title **Clustering** - selecciones un cluster principal para conocer cuales son los sublusters asociados {"run":"auto"}
top_cluster = 3  # @param {"type":null}
tyk.list_subclusters(top_cluster)

"""## **Visualización de redes de co-ocurrencias**

En este paso vamos a generar un **grafo** que muestra cómo se relacionan entre sí los elementos de un tipo específico (por palabras clave, revistas, autores y otras posibilidades).


"""

# @title Seleccione el tipo de red y la cantidad máxima de nodos {"run":"auto"}
visualizar = "Institutions"  # @param ["Keywords", "Title Words", "Subject Categories", "Subject Sub-Categories", "Institutions", "References", "Reference Sources"]
nodos_max = 100 # @param {"type": null}

key = next((k for k, v in tyk.stuff_titles.items() if v == visualizar), None)

tyk.plot_cooc_network_interactive(node_type=key, min_node_size=5, max_nodes= nodos_max);

"""## **Visualización del grafo de clusters principales (TOP)**

Muestra un **mapa de relaciones** entre los clusters principales (*TOP*)

---

### **¿Qué hace este paso?**
- **Construye** un grafo donde:
  - Cada *nodo* es un *top cluster*, su *tamaño* es función del *número de papers*.
  - Las aristas representan conexiones bibliográficas entre clusters.


"""

# @title Red interactiva de clusters y resúmenes {"run":"auto"}
tyk.plot_clusters_graph_interactive()

"""## **Visualización interactiva de subclusters por TOP**

Esta función permite **explorar gráficamente** todos los subclusters que pertenecen a un cluster principal (**TOP**) específico.  
Es útil para identificar la estructura interna de un TOP y las relaciones entre sus subclusters.

---

### **Instrucciones de uso**
1. **Selecciona** el TOP que deseas analizar:
   - Puedes ingresar **el ID** del TOP (ej: `1`).
   - O **su nombre** exacto tal como aparece en la lista (ej: `"EMPATHY"`).
2. El grafo resultante mostrará:
   - **Nodos** → Cada subcluster del TOP seleccionado.
   - **Conexiones** → Relaciones detectadas entre subclusters.
3. Si no indicas ningún TOP:
   - Se mostrará una **lista de todos los TOPs** disponibles para que elijas.

"""

# @title Seleccione un Top cluster - Red interactiva de subclusters y resúmenes {"run":"auto"}
top_cluster = 2  # @param {"type":null}
tyk.plot_subclusters_graph_interactive(top_cluster)

"""## **Renombrar un cluster (TOP o SUB)**

Con este comando puedes cambiar el nombre de cualquier **TOP** o **SUB** cluster de forma inmediata.  
Este cambio se aplicará a todas las visualizaciones, tablas y listados, pero **no modifica los archivos originales** en disco.
1. **Selecciona** si es un TOP o SUB cluster.
2. **Indica** el cluster que deseas modificar:
   - Puedes ingresar **el ID** del TOP (ej: `1`).
   - O **su nombre** exacto tal como aparece en la lista (ej: `"EMPATHY"`).
3. Ingresa el **nuevo nombre** del cluster indicado previamente.


"""

# @title Renombre un cluster {"run":"auto"}

level = "SUB"            # @param ["TOP","SUB"]
cluster = "1" # @param {"type":"string"}
nuevo_nombre = ""  # @param {"type":"string"}

tyk.rename_cluster(level=level, cluster=str(cluster), new_name=nuevo_nombre)

"""## **Exploración detallada de un cluster o subcluster**

Esta es la función más importante para **examinar en profundidad** la información de un cluster específico, ya sea un **TOP** o un **SUB**.  
Permite visualizar gráficos, tablas y métricas asociadas al tipo de información seleccionado.

---

### **Visualización**
- Muestra siempre un **encabezado descriptivo** con:
  - Nivel.
  - Nombre y ID del cluster.
  - Tipo de información seleccionada.
"""

# @title Seleccione el tipo de datos que desea visualizar para un cluster {"run":"auto"}
visualizar = "Institutions"  # @param ["Keywords", "Title Words", "Subject Categories", "Subject Sub-Categories", "Journal Sources", "Countries", "Institutions", "References", "Reference Sources", "Authors (Freq)", "Most Cited Authors", "Most Cited Papers", "Most Representative Papers", "Publicaciones por año"]
cluster_top = ""        # @param {"type":"string"}

key = next((k for k, v in tyk.stuff_titles.items() if v == visualizar), None)
tyk.describe_cluster_params("TOP", key, str(cluster_top), "")

# @title Seleccione el tipo de visualización para subclusters {"run":"auto"}
visualizar = "Reference Sources"  # @param ["Keywords", "Title Words", "Subject Categories", "Subject Sub-Categories", "Journal Sources", "Countries", "Institutions", "References", "Reference Sources", "Authors (Freq)", "Most Cited Authors", "Most Cited Papers", "Most Representative Papers", "Publicaciones por año"]
cluster_top = "2"        # @param {"type":"string"}
cluster_sub = "2002"     # @param {"type":"string"}

key = next((k for k, v in tyk.stuff_titles.items() if v == visualizar), None)
tyk.describe_cluster_params("SUB", key, str(cluster_top), str(cluster_sub))